{% extends 'base.html' %}
{% block title %}{{ view.object|yesno:"Editar categoría,Nueva categoría" }}{% endblock %}
{% block content %}

<nav aria-label="breadcrumb" class="mb-3">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a class="link-light" href="{% url 'dashboard' %}">Dashboard</a></li>
    <li class="breadcrumb-item"><a class="link-light" href="{% url 'categories_list' %}">Categorías</a></li>
    <li class="breadcrumb-item active" aria-current="page">
      {{ view.object|yesno:"Editar,Nueva" }} categoría
    </li>
  </ol>
</nav>

<div class="row justify-content-center">
  <div class="col-lg-7 col-md-8">
    <div class="card shadow border-0 overflow-hidden">

      <div class="p-4" style="background: linear-gradient(135deg,#1f6feb,#2ea043); color:#fff;">
        <h3 class="m-0 d-flex align-items-center gap-2">
          {{ view.object|yesno:"Editar categoría,Nueva categoría" }}
        </h3>
        <small class="opacity-75">Los campos marcados con <span class="text-warning">*</span> son obligatorios.</small>
      </div>

      <div class="p-4">

        {% if form.non_field_errors %}
          <div class="alert alert-danger mb-4">
            {% for err in form.non_field_errors %}{{ err }}<br>{% endfor %}
          </div>
        {% endif %}

        <form method="post" novalidate>
          {% csrf_token %}

          <div class="form-floating mb-3">
            {{ form.name }}
            <label for="{{ form.name.id_for_label }}">Nombre <span class="text-warning">*</span></label>
            {% if form.name.errors %}
              <div class="form-text text-danger">
                {% for err in form.name.errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
              </div>
            {% else %}
              <div class="form-text">Ej: “Universidad”, “Trabajo”, “Personal”.</div>
            {% endif %}
          </div>

          <div class="form-floating mb-4">
            {{ form.description }}
            <label for="{{ form.description.id_for_label }}">Descripción</label>
            {% if form.description.errors %}
              <div class="form-text text-danger">
                {% for err in form.description.errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
              </div>
            {% else %}
              <div class="form-text">Opcional: agrega un detalle breve.</div>
            {% endif %}
          </div>

          <div class="d-grid d-md-flex gap-2">
            <button type="submit" class="btn btn-primary px-4">
              Guardar
            </button>
            <a href="{% url 'categories_list' %}" class="btn btn-outline-secondary px-4">
              Cancelar
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
